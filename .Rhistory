left_join(languages, by = "language_iso_code")
plot %>%
ggplot(aes(x = language, y = total, fill = label)) +
geom_col(stat = "identity")
plot %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col(stat = "identity")
language_countries = language_countries[-20]
df = merge(afrisenti, languages, by = "language_iso_code", all.x = TRUE)
language_countries = merge(language_countries, country_regions, by = "country", all.x = TRUE)
language_scripts = language_scripts[, by = language_iso_code, .(scripts = paste(sort(script), collapse = ", "))]
afrisenti %>%
group(language_iso_code) %>%
mutate(total = n())
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n())
group_by(language_iso_code, label) %>%
summarise(total_label = n()) %>%
left_join(languages, by = "language_iso_code")
plot <- afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total_label = n()) %>%
left_join(languages, by = "language_iso_code")
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total_label = n()) %>%
left_join(languages, by = "language_iso_code")
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total_label = n() / total) %>%
left_join(languages, by = "language_iso_code")
plot <- afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total_label = n()
totatl = total) %>%
plot <- afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total_label = n(),
totatl = total) %>%
left_join(languages, by = "language_iso_code")
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total_label = n(),
totatl = total) %>%
left_join(languages, by = "language_iso_code")
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label, total) %>%
summarise(total_label = n() / total) %>%
left_join(languages, by = "language_iso_code")
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label, total) %>%
summarise(total_label = n() / total) %>%
left_join(languages, by = "language_iso_code") %>%
distinct()
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total_label = n() / total) %>%
left_join(languages, by = "language_iso_code") %>%
distinct()
df <-
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total_label = n() / total) %>%
left_join(languages, by = "language_iso_code") %>%
distinct()
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col()
df <-
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total = n() / total) %>%
left_join(languages, by = "language_iso_code") %>%
distinct()
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col()
country_regions
left_join(languages, by = "language_iso_code") %>%
left_join(language_countries, by = "language_iso_code") %>%
left_join((country_regions, by = "country"))
df <-
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total = n() / total) %>%
distinct() %>%
left_join(languages, by = "language_iso_code") %>%
left_join(language_countries, by = "language_iso_code") %>%
left_join((country_regions, by = "country"))
df <-
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total = n() / total) %>%
distinct() %>%
left_join(languages, by = "language_iso_code") %>%
left_join(language_countries, by = "language_iso_code") %>%
left_join(country_regions, by = "country")
View(df)
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col()
df <-
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total = n() / total) %>%
distinct() %>%
left_join(languages, by = "language_iso_code") %>%
left_join(language_countries, by = "language_iso_code") %>%
#left_join(country_regions, by = "country")
df
df <-
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total = n() / total) %>%
distinct() %>%
left_join(languages, by = "language_iso_code") %>%
left_join(language_countries, by = "language_iso_code") #%>%
dfdf
df
country
language_country
language_countries
language_countries %>%
group_by(language_iso_code) %>%
summarise(
x = paste(country)
)
language_countries %>%
group_by(language_iso_code) %>%
summarise(
x = paste(country)
)
language_countries %>%
group_by(language_iso_code) %>%
summarise(
x = n()
)
language_countries %>%
group_by(language_iso_code) %>%
summarise(
x = paste(country, collapse = "")
)
language_countries %>%
group_by(language_iso_code) %>%
summarise(
x = paste(country, collapse = " ")
)
language_countries %>%
group_by(language_iso_code) %>%
mutate(paste0(collapse = " "))
language_countries %>%
group_by(language_iso_code) %>%
mutate(paste0(collapse = " ")) %>%
select(-country) %>%
distinct()
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct()
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(region != "Southeastern Africa")
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() #%>%
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
arrange(language_iso_code)
filter(
language_iso_code %in% c("swa", "tso", "pt-MZ") &
region %in% c("Southern Africa", "East Africa"))
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
language_iso_code %in% c("swa", "tso", "pt-MZ") &
region %in% c("Southern Africa", "East Africa"))
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!(language_iso_code %in% c("swa", "tso", "pt-MZ")) &
!(region %in% c("Southern Africa", "East Africa"))
)
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!(language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa"))
)
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
(language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa"))
)
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
)
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
)
country_info <-
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
)
df <-
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total = n() / total) %>%
distinct() %>%
left_join(languages, by = "language_iso_code") %>%
left_join(country_info, by = "language_Iso_code")
df <-
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total = n() / total) %>%
distinct() %>%
left_join(languages, by = "language_iso_code") %>%
left_join(country_info, by = "language_iso_code")
df
View(df)
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col()
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col() %>%
facet_wrap(~region)
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col() +
facet_wrap(~region)
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col() +
facet_col(~region)
library(ggforce)
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col() +
facet_col(~region)
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col() +
facet_col(~region,, scales = free_y)
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col() +
facet_col(~region,, scales = "free_y")
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col() +
facet_col(~region, scales = "free_y")
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col() +
facet_col(~region, scales = "free_y", space = "free")
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col() +
scale_fill_npg()
library(ggsci)
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col() +
scale_fill_npg() +
facet_col(~region, scales = "free_y", space = "free")
View(df)
country_info <-
language_countries %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
)
country_info
country_info <-
language_countries %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
) %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct()
country_info
country_info <-
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
)
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
)
language_countries
language_countries %>%
filter(
!(country = Mozambique & region %in% c("Southern Africa", "East Africa"))
)
language_countries %>%
filter(
!(country == "Mozambique" & region %in% c("Southern Africa", "East Africa"))
)
language_countries %>%
filter(
!(country == "Mozambique" & region %in% c("Southern Africa", "East Africa"))
) %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct()
language_countries %>%
filter(
!(country == "Mozambique" & region %in% c("Southern Africa", "East Africa"))
) %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
)
country_info <-
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
) %>%
mutate(region = case_when(
region == "Northern Africa" ~ "North Africa",
TRUE
))
country_info <-
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
) %>%
mutate(region = case_when(
region == "Northern Africa" ~ "North Africa",
TRUE ~ region
))
View(country_info)
language_countries %>%
filter(
!(country == "Mozambique" & region %in% c("Southern Africa", "East Africa"))
) %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
) %>%
mutate(region = case_when(
region == "Northern Africa" ~ "North Africa",
TRUE ~ region
))
language_countries %>%
filter(
!(country == "Mozambique" & region %in% c("Southern Africa", "East Africa"))
) %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
) %>%
mutate(region = case_when(
region == "Northern Africa" ~ "North Africa",
TRUE ~ region
))
country_info <-
language_countries %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
) %>%
mutate(region = case_when(
region == "Northern Africa" ~ "North Africa",
TRUE ~ region
))
language_countries %>%
filter(
!(country == "Mozambique" & region %in% c("Southern Africa", "East Africa"))
) %>%
group_by(language_iso_code) %>%
mutate(countries = paste0(country, collapse = " ")) %>%
select(-country) %>%
distinct() %>%
filter(
!((language_iso_code %in% c("swa", "tso", "pt-MZ")) &
(region %in% c("Southern Africa", "East Africa")))
) %>%
mutate(region = case_when(
region == "Northern Africa" ~ "North Africa",
TRUE ~ region
))
df <-
afrisenti %>%
group_by(language_iso_code) %>%
mutate(total = n()) %>%
group_by(language_iso_code, label) %>%
summarise(total = n() / total) %>%
distinct() %>%
left_join(languages, by = "language_iso_code") %>%
left_join(country_info, by = "language_iso_code")
df %>%
ggplot(aes(x = total, y = language, fill = label)) +
geom_col() +
scale_fill_npg() +
facet_col(~region, scales = "free_y", space = "free")
